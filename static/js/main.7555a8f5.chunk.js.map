{"version":3,"sources":["components/PostsList/PostsList.tsx","api/posts.ts","api/api.ts","components/NewCommentForm/NewCommentForm.tsx","components/Loader/Loader.tsx","components/PostDetails/PostDetails.tsx","App.tsx","index.tsx"],"names":["PostsList","React","memo","posts","selectedPostId","onSelectPost","className","map","post","userId","title","id","type","onClick","request","url","options","fetch","then","response","json","NewCommentForm","onAddComment","useState","postId","name","email","body","newComment","setNewComment","addNewComment","useCallback","event","comment","preventDefault","method","headers","JSON","stringify","onSubmit","placeholder","value","onChange","state","target","Loader","PostDetails","showComments","setShowComments","postDetails","setPostDetails","postDetailsLoaded","setPostDetailsLoaded","comments","setComments","isCommentAdded","setIsCommentAdded","loadPostDetails","a","loadedPostDetails","loadComments","loadedComments","useEffect","commentId","filter","item","App","users","setUsers","setPosts","postsLoaded","setPostsLoaded","selectedUserId","setSelectedUserId","setSelectedPostId","loadUsers","loadedUsers","firstTenUsers","user","loadPosts","loadedPosts","selectPostHandler","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7555a8f5.chunk.js","sourcesContent":["import React from 'react';\nimport { Post } from '../../react-app-env';\nimport './PostsList.scss';\n\ninterface Props {\n  posts: Post[];\n  selectedPostId: number;\n  onSelectPost: (postId: number) => void;\n}\n\nexport const PostsList: React.FC<Props> = React.memo(\n  ({\n    posts,\n    selectedPostId,\n    onSelectPost,\n  }) => (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      <ul className=\"PostsList__list\" data-cy=\"postDetails\">\n        {posts.map(post => (\n          <li className=\"PostsList__item\" key={post.id}>\n            <div>\n              <b>\n                {`[User #${post.userId}]: `}\n              </b>\n              {post.title}\n            </div>\n\n            {post.id === selectedPostId\n              ? (\n                <button\n                  type=\"button\"\n                  className=\"PostsList__button button\"\n                  onClick={() => onSelectPost(0)}\n                >\n                  Close\n                </button>\n              )\n              : (\n                <button\n                  type=\"button\"\n                  className=\"PostsList__button button\"\n                  onClick={() => {\n                    onSelectPost(post.id);\n                  }}\n                >\n                  Open\n                </button>\n              )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  ),\n);\n","import { BASE_URL } from './api';\nimport { NewComment } from '../react-app-env';\n\nfunction request(url: string, options?: {}) {\n  return fetch(`${BASE_URL}${url}`, options)\n    .then(response => response.json());\n}\n\nexport function getUserPosts(userId: number) {\n  if (userId !== 0) {\n    return request(`/posts?userId=${userId}`);\n  }\n\n  return request('/posts');\n}\n\nexport function getPostDetails(postId: number) {\n  return request(`/posts/${postId}`);\n}\n\nexport function getPostComments(postId: number) {\n  return request(`/comments?postId=${postId}`);\n}\n\nexport function getUsers() {\n  return request('/users');\n}\n\nexport function addComment(comment: NewComment) {\n  return request(\n    '/comments',\n    {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8',\n      },\n      body: JSON.stringify({\n        postId: comment.postId,\n        name: comment.name,\n        email: comment.email,\n        body: comment.body,\n      }),\n    },\n  );\n}\n\nexport function deleteComment(commentId: number) {\n  return request(\n    `/comments/${commentId}`,\n    {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json; charset=UTF-8',\n      },\n    },\n  );\n}\n","export const BASE_URL = 'https://mate.academy/students-api';\n","import React, { useCallback, useState } from 'react';\nimport './NewCommentForm.scss';\nimport { addComment } from '../../api/posts';\n\ninterface Props {\n  selectedPostId: number;\n  onAddComment: (added: boolean) => void;\n}\n\nexport const NewCommentForm: React.FC<Props> = ({\n  selectedPostId,\n  onAddComment,\n}) => {\n  const [newComment, setNewComment] = useState({\n    postId: selectedPostId,\n    name: '',\n    email: '',\n    body: '',\n  });\n\n  const {\n    name,\n    email,\n    body,\n  } = newComment;\n\n  const addNewComment = useCallback(\n    (event: React.FormEvent<HTMLFormElement>) => {\n      event.preventDefault();\n\n      addComment(newComment)\n        .then(() => {\n          onAddComment(true);\n          setNewComment({\n            postId: selectedPostId,\n            name: '',\n            email: '',\n            body: '',\n          });\n        });\n\n      onAddComment(false);\n    },\n    [newComment],\n  );\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={(event) => addNewComment(event)}\n    >\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          value={name}\n          onChange={(event) => setNewComment((state) => ({\n            ...state,\n            name: event.target.value,\n          }))}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          value={email}\n          onChange={(event) => setNewComment((state) => ({\n            ...state,\n            email: event.target.value,\n          }))}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={body}\n          onChange={(event) => setNewComment((state) => ({\n            ...state,\n            body: event.target.value,\n          }))}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React from 'react';\nimport './Loader.scss';\n\nexport const Loader: React.FC = () => (\n  <div className=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import React, { useCallback, useEffect, useState } from 'react';\nimport { NewCommentForm } from '../NewCommentForm';\nimport './PostDetails.scss';\nimport { Comment, Post } from '../../react-app-env';\nimport {\n  getPostComments,\n  getPostDetails,\n  deleteComment,\n} from '../../api/posts';\nimport { Loader } from '../Loader';\n\ninterface Props {\n  selectedPostId: number;\n}\n\nexport const PostDetails: React.FC<Props> = React.memo(\n  ({\n    selectedPostId,\n  }) => {\n    const [showComments, setShowComments] = useState(true);\n    const [postDetails, setPostDetails] = useState<Post>();\n    const [postDetailsLoaded, setPostDetailsLoaded] = useState(false);\n    const [comments, setComments] = useState<Comment[]>([]);\n    const [isCommentAdded, setIsCommentAdded] = useState(false);\n\n    const loadPostDetails = useCallback(\n      async () => {\n        setPostDetailsLoaded(false);\n\n        const loadedPostDetails = await getPostDetails(selectedPostId);\n\n        setPostDetailsLoaded(true);\n\n        setPostDetails(loadedPostDetails);\n      },\n      [selectedPostId],\n    );\n\n    const loadComments = useCallback(\n      async () => {\n        const loadedComments = await getPostComments(selectedPostId);\n\n        setComments(loadedComments);\n      },\n      [selectedPostId],\n    );\n\n    useEffect(() => {\n      loadPostDetails();\n      loadComments();\n    }, [selectedPostId, isCommentAdded]);\n\n    return (\n      <div className=\"PostDetails\">\n        <h2>{`Post details: ${postDetails?.id}`}</h2>\n\n        {postDetailsLoaded\n          ? (\n            <section className=\"PostDetails__post\">\n              <p>{postDetails?.body}</p>\n            </section>\n          )\n          : (\n            <Loader />\n          )}\n\n        <section className=\"PostDetails__comments\" data-cy=\"postDetails\">\n          {showComments\n            ? (\n              <button\n                type=\"button\"\n                className=\"button\"\n                onClick={() => setShowComments(false)}\n              >\n                Hide comments\n              </button>\n            )\n            : (\n              <button\n                type=\"button\"\n                className=\"button\"\n                onClick={() => setShowComments(true)}\n              >\n                Show comments\n              </button>\n            )}\n\n          {showComments && (\n            <ul className=\"PostDetails__list\">\n              {comments.map((comment: Comment) => (\n                <li className=\"PostDetails__list-item\">\n                  <button\n                    type=\"button\"\n                    className=\"PostDetails__remove-button button\"\n                    onClick={() => {\n                      deleteComment(comment.id)\n                        .then(() => {\n                          setComments(comments.filter(item => (\n                            item.id !== comment.id\n                          )));\n                        });\n                    }}\n                  >\n                    X\n                  </button>\n                  <p>{comment.body}</p>\n                </li>\n              ))}\n            </ul>\n          )}\n        </section>\n\n        <section>\n          <div className=\"PostDetails__form-wrapper\">\n            <NewCommentForm\n              selectedPostId={selectedPostId}\n              onAddComment={setIsCommentAdded}\n            />\n          </div>\n        </section>\n      </div>\n    );\n  },\n);\n","import React, { useCallback, useEffect, useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { Post, User } from './react-app-env';\nimport { getUserPosts, getUsers } from './api/posts';\nimport { Loader } from './components/Loader';\n\nconst App: React.FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [postsLoaded, setPostsLoaded] = useState(false);\n  const [selectedUserId, setSelectedUserId] = useState(0);\n  const [selectedPostId, setSelectedPostId] = useState(0);\n\n  const loadUsers = useCallback(\n    async () => {\n      const loadedUsers = await getUsers();\n\n      setUsers(loadedUsers);\n    },\n    [],\n  );\n\n  useEffect(() => {\n    loadUsers();\n  }, []);\n\n  const firstTenUsers = users.filter(user => user.id <= 10 && user.id >= 1);\n\n  const loadPosts = useCallback(\n    async () => {\n      const loadedPosts = await getUserPosts(selectedUserId);\n\n      setPostsLoaded(true);\n\n      setPosts(loadedPosts);\n    },\n    [],\n  );\n\n  useEffect(() => {\n    loadPosts();\n  }, [selectedUserId]);\n\n  const selectPostHandler = useCallback(\n    (postId: number) => {\n      setSelectedPostId(postId);\n    },\n    [selectedPostId],\n  );\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label>\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            value={selectedUserId}\n            onChange={(event) => setSelectedUserId(+event.target.value)}\n          >\n            <option value=\"0\">All users</option>\n            {firstTenUsers.map((user) => {\n              return (\n                <option\n                  key={user.id}\n                  value={user.id}\n                >\n                  {user.name}\n                </option>\n              );\n            })}\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          {postsLoaded\n            ? (\n              <PostsList\n                posts={posts}\n                selectedPostId={selectedPostId}\n                onSelectPost={selectPostHandler}\n              />\n            )\n            : (\n              <Loader />\n            )}\n        </div>\n\n        <div className=\"App__content\">\n          {selectedPostId !== 0 && (\n            <PostDetails\n              selectedPostId={selectedPostId}\n            />\n          )}\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}