(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(7),s=n.n(c),a=n(5),o=n(2),r=n(3),i=n.n(r),u=n(1),l=n.n(u),j=(n(13),n(14),n(15),n(0)),b=l.a.memo((function(e){var t=e.posts,n=e.selectedPostId,c=e.onSelectPost;return Object(j.jsxs)("div",{className:"PostsList",children:[Object(j.jsx)("h2",{children:"Posts:"}),Object(j.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:t.map((function(e){return Object(j.jsxs)("li",{className:"PostsList__item",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("b",{children:"[User #".concat(e.userId,"]: ")}),e.title]}),e.id===n?Object(j.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return c(0)},children:"Close"}):Object(j.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){c(e.id)},children:"Open"})]},e.id)}))})]})})),d=n(4);n(17);function m(e,t){return fetch("".concat("https://mate.academy/students-api").concat(e),t).then((function(e){return e.json()}))}var O=function(e){var t=e.selectedPostId,n=e.onAddComment,c=Object(u.useState)({postId:t,name:"",email:"",body:""}),s=Object(o.a)(c,2),a=s[0],r=s[1],i=a.name,l=a.email,b=a.body,O=Object(u.useCallback)((function(e){var c;e.preventDefault(),(c=a,m("/comments",{method:"POST",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify({postId:c.postId,name:c.name,email:c.email,body:c.body})})).then((function(){n(!0),r({postId:t,name:"",email:"",body:""})})),n(!1)}),[a]);return Object(j.jsxs)("form",{className:"NewCommentForm",onSubmit:function(e){return O(e)},children:[Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:i,onChange:function(e){return r((function(t){return Object(d.a)(Object(d.a)({},t),{},{name:e.target.value})}))}})}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:l,onChange:function(e){return r((function(t){return Object(d.a)(Object(d.a)({},t),{},{email:e.target.value})}))}})}),Object(j.jsx)("div",{className:"form-field",children:Object(j.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:b,onChange:function(e){return r((function(t){return Object(d.a)(Object(d.a)({},t),{},{body:e.target.value})}))}})}),Object(j.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},p=(n(18),n(19),function(){return Object(j.jsx)("div",{className:"Loader",children:Object(j.jsx)("div",{className:"Loader__content"})})}),f=l.a.memo((function(e){var t=e.selectedPostId,n=Object(u.useState)(!0),c=Object(o.a)(n,2),s=c[0],r=c[1],l=Object(u.useState)(),b=Object(o.a)(l,2),d=b[0],f=b[1],h=Object(u.useState)(!1),x=Object(o.a)(h,2),v=x[0],_=x[1],N=Object(u.useState)([]),y=Object(o.a)(N,2),C=y[0],P=y[1],S=Object(u.useState)(!1),k=Object(o.a)(S,2),w=k[0],I=k[1],D=Object(u.useCallback)(Object(a.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return _(!1),e.next=3,m("/posts/".concat(t));case 3:n=e.sent,_(!0),f(n);case 6:case"end":return e.stop()}}),e)}))),[t]),g=Object(u.useCallback)(Object(a.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/comments?postId=".concat(t));case 2:n=e.sent,P(n);case 4:case"end":return e.stop()}}),e)}))),[t]);return Object(u.useEffect)((function(){D(),g()}),[t,w]),Object(j.jsxs)("div",{className:"PostDetails",children:[Object(j.jsx)("h2",{children:"Post details: ".concat(null===d||void 0===d?void 0:d.id)}),v?Object(j.jsx)("section",{className:"PostDetails__post",children:Object(j.jsx)("p",{children:null===d||void 0===d?void 0:d.body})}):Object(j.jsx)(p,{}),Object(j.jsxs)("section",{className:"PostDetails__comments","data-cy":"postDetails",children:[s?Object(j.jsx)("button",{type:"button",className:"button",onClick:function(){return r(!1)},children:"Hide comments"}):Object(j.jsx)("button",{type:"button",className:"button",onClick:function(){return r(!0)},children:"Show comments"}),s&&Object(j.jsx)("ul",{className:"PostDetails__list",children:C.map((function(e){return Object(j.jsxs)("li",{className:"PostDetails__list-item",children:[Object(j.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){var t;(t=e.id,m("/comments/".concat(t),{method:"DELETE",headers:{"Content-Type":"application/json; charset=UTF-8"}})).then((function(){P(C.filter((function(t){return t.id!==e.id})))}))},children:"X"}),Object(j.jsx)("p",{children:e.body})]})}))})]}),Object(j.jsx)("section",{children:Object(j.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(j.jsx)(O,{selectedPostId:t,onAddComment:I})})})]})})),h=function(){var e=Object(u.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],s=Object(u.useState)([]),r=Object(o.a)(s,2),l=r[0],d=r[1],O=Object(u.useState)(!1),h=Object(o.a)(O,2),x=h[0],v=h[1],_=Object(u.useState)(0),N=Object(o.a)(_,2),y=N[0],C=N[1],P=Object(u.useState)(0),S=Object(o.a)(P,2),k=S[0],w=S[1],I=Object(u.useCallback)(Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/users");case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)}))),[]);Object(u.useEffect)((function(){I()}),[]);var D=n.filter((function(e){return e.id<=10&&e.id>=1})),g=Object(u.useCallback)(Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m((n=y)?"/posts?userId=".concat(n):"/posts");case 2:t=e.sent,v(!0),d(t);case 5:case"end":return e.stop()}var n}),e)}))),[l]);Object(u.useEffect)((function(){g()}),[y]);var A=Object(u.useCallback)((function(e){w(e)}),[k]);return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)("header",{className:"App__header",children:Object(j.jsxs)("label",{children:["Select a user: \xa0",Object(j.jsxs)("select",{className:"App__user-selector",onChange:function(e){return C(+e.target.value)},children:[Object(j.jsx)("option",{value:"0",children:"All users"}),D.map((function(e){return Object(j.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]})}),Object(j.jsxs)("main",{className:"App__main",children:[Object(j.jsx)("div",{className:"App__sidebar",children:x?Object(j.jsx)(b,{posts:l,selectedPostId:k,onSelectPost:A}):Object(j.jsx)(p,{})}),Object(j.jsx)("div",{className:"App__content",children:0!==k&&Object(j.jsx)(f,{selectedPostId:k})})]})]})};s.a.render(Object(j.jsx)(h,{}),document.getElementById("root"))}],[[20,1,2]]]);
//# sourceMappingURL=main.3fcf2ac9.chunk.js.map